

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Indentation &mdash; abapy 2.3.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '2.3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="abapy 2.3.0 documentation" href="index.html" />
    <link rel="next" title="Miscellaneous" href="misc.html" />
    <link rel="prev" title="Post Processing" href="postproc.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="misc.html" title="Miscellaneous"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="postproc.html" title="Post Processing"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">abapy 2.3.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="indentation">
<h1>Indentation<a class="headerlink" href="#indentation" title="Permalink to this headline">¶</a></h1>
<p>Indentation simulation tools</p>
<div class="section" id="indentation-meshes">
<h2>Indentation meshes<a class="headerlink" href="#indentation-meshes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="paraminfinitemesh-function">
<h3><tt class="docutils literal"><span class="pre">ParamInfiniteMesh</span></tt> function<a class="headerlink" href="#paraminfinitemesh-function" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="abapy.indentation.ParamInfiniteMesh">
<tt class="descclassname">abapy.indentation.</tt><tt class="descname">ParamInfiniteMesh</tt><big>(</big><em>Na=10</em>, <em>Nb=10</em>, <em>l=1.0</em>, <em>core_name='CAX4'</em>, <em>add_shell=True</em>, <em>shell_name='CINAX4'</em>, <em>dti='I'</em>, <em>dtf='d'</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#ParamInfiniteMesh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.ParamInfiniteMesh" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a mesh dedicated to 2D/Axisymmetrical indentation. It is composed of a core of quadrangle elements and a shell of infinite elements. The core is divided into three zones. The center is core_1, the right is core_2 and the bottom is core_3. Core_1 is a Na x Na square mesh whereas core_2 and core_3 are respectively Nb x Na and Na x Nb structured meshes that have been transformed to be connected and guaranty element size progression.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>Na</strong> (<em>int &gt; 1</em>) &#8211; number of elements per side in core_1</li>
<li><strong>Nb</strong> (<em>int &gt; 0</em>) &#8211; number of radial elements in core_2 and core_3</li>
<li><strong>l</strong> (<em>float &gt; 0</em>) &#8211; core_1 size</li>
<li><strong>core_name</strong> (<em>string</em>) &#8211; element name in core</li>
<li><strong>add_shell</strong> (<em>boolean</em>) &#8211; True if the shell of infinite elements is to be used, False if not.</li>
<li><strong>shell_name</strong> (<em>string</em>) &#8211; element name in shell, should be infinite</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="indentationmesh-function">
<h3><tt class="docutils literal"><span class="pre">IndentationMesh</span></tt> function<a class="headerlink" href="#indentationmesh-function" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="abapy.indentation.IndentationMesh">
<tt class="descclassname">abapy.indentation.</tt><tt class="descname">IndentationMesh</tt><big>(</big><em>Na=8</em>, <em>Nb=8</em>, <em>Ns=4</em>, <em>Nf=2</em>, <em>l=1.0</em>, <em>name='CAX4'</em>, <em>dtf='f'</em>, <em>dti='I'</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#IndentationMesh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.IndentationMesh" title="Permalink to this definition">¶</a></dt>
<dd><p>An indentation oriented full quad mesh.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>Na</strong> (<em>int</em>) &#8211; number of elements along x axis in the finely meshed contact zone. <em>Must be power of 2</em>.</li>
<li><strong>Nb</strong> (<em>int</em>) &#8211; number of elements along y axis in the finely meshed contact zone. <em>Must be power of 2</em>.</li>
<li><strong>Ns</strong> (<em>int</em>) &#8211; number of radial elements in the shell.</li>
<li><strong>Nf</strong> (<em>int</em>) &#8211; number of orthoradial elements in each half shell. Must be &gt; 0.</li>
<li><strong>l</strong> (<em>float.</em>) &#8211; length of the square zone.</li>
<li><strong>name</strong> (<em>string</em>) &#8211; name of the elements. Note that this mesh if full quad so only one name is required.</li>
<li><strong>dtf</strong> (<em>string</em>) &#8211; float data type in <tt class="docutils literal"><span class="pre">array.array</span></tt>, &#8216;d&#8217; for float64 or &#8216;f&#8217; for float32.</li>
<li><strong>dti</strong> (<em>string</em>) &#8211; int data type in <tt class="docutils literal"><span class="pre">array.array</span></tt>, &#8216;I&#8217; for unsignedint32 or &#8216;H&#8217; for unsignedint16 (dangerous in some cases).</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">abapy.indentation</span> <span class="kn">import</span> <span class="n">IndentationMesh</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>

<span class="n">Na</span> <span class="o">=</span> <span class="mi">16</span> <span class="c"># Elements along x axis in the square zone</span>
<span class="n">Nb</span> <span class="o">=</span> <span class="mi">16</span> <span class="c"># Elements along y axis in the square zone</span>
<span class="n">Ns</span> <span class="o">=</span> <span class="mi">2</span> <span class="c"># Radial number of elements in the shell</span>
<span class="n">Nf</span> <span class="o">=</span> <span class="mi">2</span> <span class="c"># Minimal number of orthoradial elements in heach half shell</span>
<span class="n">l</span> <span class="o">=</span> <span class="mf">1.</span> <span class="c"># Size of the square zone</span>
<span class="n">name</span> <span class="o">=</span> <span class="s">&#39;CAX4&#39;</span> <span class="c"># Name of the elements</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">IndentationMesh</span><span class="p">(</span><span class="n">Na</span> <span class="o">=</span> <span class="n">Na</span><span class="p">,</span> <span class="n">Nb</span> <span class="o">=</span> <span class="n">Nb</span><span class="p">,</span> <span class="n">Ns</span> <span class="o">=</span> <span class="n">Ns</span><span class="p">,</span> <span class="n">Nf</span><span class="o">=</span> <span class="n">Nf</span><span class="p">,</span> <span class="n">l</span> <span class="o">=</span> <span class="n">l</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="p">)</span>

<span class="n">m_core</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="s">&#39;core_elements&#39;</span><span class="p">]</span>
<span class="n">m_shell</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="s">&#39;shell_elements&#39;</span><span class="p">]</span>

<span class="n">x_core</span><span class="p">,</span> <span class="n">y_core</span><span class="p">,</span> <span class="n">z_core</span> <span class="o">=</span> <span class="n">m_core</span><span class="o">.</span><span class="n">get_edges</span><span class="p">()</span>
<span class="n">x_shell</span><span class="p">,</span> <span class="n">y_shell</span><span class="p">,</span> <span class="n">z_shell</span> <span class="o">=</span> <span class="n">m_shell</span><span class="o">.</span><span class="n">get_edges</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">clf</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s">&#39;off&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">xlim</span><span class="p">,</span> <span class="n">ylim</span><span class="p">,</span> <span class="n">zlim</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">boundingBox</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s">&#39;equal&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="n">xlim</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="n">ylim</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_core</span><span class="p">,</span><span class="n">y_core</span><span class="p">,</span> <span class="s">&#39;b-&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s">&#39;Core elements&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_shell</span><span class="p">,</span><span class="n">y_shell</span><span class="p">,</span> <span class="s">&#39;r-&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s">&#39;Shell elements&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="./example_code/indentation/IndentationMesh.py">Source code</a>, <a class="reference external" href="./example_code/indentation/IndentationMesh.png">png</a>, <a class="reference external" href="./example_code/indentation/IndentationMesh.hires.png">hires.png</a>, <a class="reference external" href="./example_code/indentation/IndentationMesh.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/IndentationMesh.png" src="_images/IndentationMesh.png" />
</div>
</dd></dl>

</div>
</div>
<div class="section" id="indenters">
<h2>Indenters<a class="headerlink" href="#indenters" title="Permalink to this headline">¶</a></h2>
<div class="section" id="rigidcone2d-class">
<h3><tt class="docutils literal"><span class="pre">RigidCone2D</span></tt> class<a class="headerlink" href="#rigidcone2d-class" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="abapy.indentation.RigidCone2D">
<em class="property">class </em><tt class="descclassname">abapy.indentation.</tt><tt class="descname">RigidCone2D</tt><big>(</big><em>half_angle=70.3</em>, <em>width=10.0</em>, <em>summit_position=(0.0</em>, <em>0.0)</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#RigidCone2D"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.RigidCone2D" title="Permalink to this definition">¶</a></dt>
<dd><p>A rigid cone usable in 2D and Axisymmetric simulations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>half_angle</strong> (<em>float &gt; 0.</em>) &#8211; half_angle in DEGREES.</li>
<li><strong>width</strong> (<em>float &gt; 0.</em>) &#8211; width of the indenter</li>
<li><strong>summit_position</strong> (<em>tuple or list containing two floats.</em>) &#8211; position of the summit in a 2D space.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="abapy.indentation.RigidCone2D.apply_displacement">
<tt class="descname">apply_displacement</tt><big>(</big><em>disp</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#RigidCone2D.apply_displacement"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.RigidCone2D.apply_displacement" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies a displacement field to the indenter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>disp</strong> (<tt class="docutils literal"><span class="pre">abapy.postproc.VectorFieldOutput</span></tt> instance.) &#8211; displacement field (with only one location).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.RigidCone2D.dump2inp">
<tt class="descname">dump2inp</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#RigidCone2D.dump2inp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.RigidCone2D.dump2inp" title="Permalink to this definition">¶</a></dt>
<dd><p>Dumps to Abaqus INP format.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.RigidCone2D.get_edges">
<tt class="descname">get_edges</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#RigidCone2D.get_edges"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.RigidCone2D.get_edges" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a plotable version of the indenter usable directly in <tt class="docutils literal"><span class="pre">matplotlib.pyplot</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">x and y lists</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.RigidCone2D.set_half_angle">
<tt class="descname">set_half_angle</tt><big>(</big><em>half_angle=70.3</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#RigidCone2D.set_half_angle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.RigidCone2D.set_half_angle" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the half angle of the indenter. Default is equivalent to modified Berkovich indenter in volume.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>half_angle</strong> (<em>float &gt; 0.</em>) &#8211; half_angle in DEGREES.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.RigidCone2D.set_summit_position">
<tt class="descname">set_summit_position</tt><big>(</big><em>summit_position</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#RigidCone2D.set_summit_position"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.RigidCone2D.set_summit_position" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the position of the indenter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>summit_position</strong> (<em>tuple or list containing two floats.</em>) &#8211; position of the summit in a 2D space.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.RigidCone2D.set_width">
<tt class="descname">set_width</tt><big>(</big><em>width</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#RigidCone2D.set_width"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.RigidCone2D.set_width" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the width of the indenter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>width</strong> (<em>float &gt; 0.</em>) &#8211; width</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="deformablecone2d-class">
<h3><tt class="docutils literal"><span class="pre">DeformableCone2D</span></tt> class<a class="headerlink" href="#deformablecone2d-class" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="abapy.indentation.DeformableCone2D">
<em class="property">class </em><tt class="descclassname">abapy.indentation.</tt><tt class="descname">DeformableCone2D</tt><big>(</big><em>half_angle=70.3</em>, <em>Na=4</em>, <em>Nb=4</em>, <em>Ns=4</em>, <em>Nf=2</em>, <em>l=1.0</em>, <em>mat_label='INDENTER_MAT'</em>, <em>summit_position=(0.0</em>, <em>0.0)</em>, <em>rigid=False</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone2D"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone2D" title="Permalink to this definition">¶</a></dt>
<dd><p>A deformable cone usable in 2D and Axisymmetric simulations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>half_angle</strong> (<em>float &gt; 0.</em>) &#8211; half_angle in DEGREES.</li>
<li><strong>Na</strong> (<em>int</em>) &#8211; number of elements along x axis in the finely meshed contact zone. <em>Must be power of 2</em>.</li>
<li><strong>Nb</strong> (<em>int</em>) &#8211; number of elements along y axis in the finely meshed contact zone. <em>Must be power of 2</em>.</li>
<li><strong>Ns</strong> (<em>int</em>) &#8211; number of radial elements in the shell.</li>
<li><strong>Nf</strong> (<em>int</em>) &#8211; number of orthoradial elements in each half shell. Must be &gt; 0.</li>
<li><strong>l</strong> (<em>float.</em>) &#8211; length of the square zone.</li>
<li><strong>mat_label</strong> (<em>any material class instance</em>) &#8211; label of the constitutive material of the indenter.</li>
<li><strong>summit_position</strong> (<em>tuple or list containing two floats.</em>) &#8211; position of the summit in a 2D space.</li>
<li><strong>rigid</strong> &#8211; True if indenter is to be rigid or False if the indenter is to be deformable. If the rigid behavior is chosen, the material label will be necessary but will not influence the results of the simulation.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">abapy.indentation</span> <span class="kn">import</span> <span class="n">DeformableCone2D</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">DeformableCone2D</span><span class="p">(</span><span class="n">Na</span> <span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">Nb</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span> <span class="n">Ns</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;DeformableCone2D.inp&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">dump2inp</span><span class="p">())</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">get_edges</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s">&#39;equal&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="./example_code/indentation/DeformableCone2D.py">Source code</a>, <a class="reference external" href="./example_code/indentation/DeformableCone2D.png">png</a>, <a class="reference external" href="./example_code/indentation/DeformableCone2D.hires.png">hires.png</a>, <a class="reference external" href="./example_code/indentation/DeformableCone2D.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/DeformableCone2D.png" src="_images/DeformableCone2D.png" />
</div>
<dl class="method">
<dt id="abapy.indentation.DeformableCone2D.apply_displacement">
<tt class="descname">apply_displacement</tt><big>(</big><em>disp</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone2D.apply_displacement"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone2D.apply_displacement" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies a displacement field to the indenter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>disp</strong> (<tt class="docutils literal"><span class="pre">abapy.postproc.VectorFieldOutput</span></tt> instance.) &#8211; displacement field (with only one location).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone2D.dump2inp">
<tt class="descname">dump2inp</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone2D.dump2inp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone2D.dump2inp" title="Permalink to this definition">¶</a></dt>
<dd><p>Dumps to Abaqus INP format.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone2D.equivalent_half_angle">
<tt class="descname">equivalent_half_angle</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone2D.equivalent_half_angle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone2D.equivalent_half_angle" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone2D.get_border">
<tt class="descname">get_border</tt><big>(</big><em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone2D.get_border"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone2D.get_border" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a plotable version of the border of the indenter usable directly in <tt class="docutils literal"><span class="pre">matplotlib.pyplot</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">x and y lists</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone2D.get_edges">
<tt class="descname">get_edges</tt><big>(</big><em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone2D.get_edges"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone2D.get_edges" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a plotable version of the indenter usable directly in <tt class="docutils literal"><span class="pre">matplotlib.pyplot</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">x and y lists</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone2D.set_Na">
<tt class="descname">set_Na</tt><big>(</big><em>Na</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone2D.set_Na"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone2D.set_Na" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the Na parameter of the indenter (see <tt class="docutils literal"><span class="pre">IndentationMesh</span></tt> for explanations).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>Na</strong> (<em>int &gt; 1</em>) &#8211; Na</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone2D.set_Nb">
<tt class="descname">set_Nb</tt><big>(</big><em>Nb</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone2D.set_Nb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone2D.set_Nb" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the Nb parameter of the indenter (see <tt class="docutils literal"><span class="pre">IndentationMesh</span></tt> for explanations).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>Nb</strong> (<em>int &gt; 1</em>) &#8211; Nb</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone2D.set_Nf">
<tt class="descname">set_Nf</tt><big>(</big><em>Nf</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone2D.set_Nf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone2D.set_Nf" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the Nf parameter of the indenter (see <tt class="docutils literal"><span class="pre">IndentationMesh</span></tt> for explanations).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>Nf</strong> (<em>int &gt; 1</em>) &#8211; Nf</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone2D.set_Ns">
<tt class="descname">set_Ns</tt><big>(</big><em>Ns</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone2D.set_Ns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone2D.set_Ns" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the Ns parameter of the indenter (see <tt class="docutils literal"><span class="pre">`IndentationMesh</span></tt> for explanations).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>Ns</strong> (<em>int &gt; 1</em>) &#8211; Ns</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone2D.set_half_angle">
<tt class="descname">set_half_angle</tt><big>(</big><em>half_angle=70.3</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone2D.set_half_angle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone2D.set_half_angle" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the half angle of the indenter. Default is equivalent to modified Berkovich indenter in volume.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>half_angle</strong> (<em>float &gt; 0.</em>) &#8211; half_angle in DEGREES.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone2D.set_l">
<tt class="descname">set_l</tt><big>(</big><em>l</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone2D.set_l"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone2D.set_l" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the l parameter of the indenter (see <tt class="docutils literal"><span class="pre">ParamInfiniteMesh</span></tt> for explanations)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>l</strong> (<em>float &gt; 0.</em>) &#8211; l</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone2D.set_mat_label">
<tt class="descname">set_mat_label</tt><big>(</big><em>mat_label</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone2D.set_mat_label"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone2D.set_mat_label" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the label of the constitutive material of the indenter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>mat_label</strong> (<em>string</em>) &#8211; mat_label</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone2D.set_rigid">
<tt class="descname">set_rigid</tt><big>(</big><em>rigid</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone2D.set_rigid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone2D.set_rigid" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the indenter to be rigid (True) or deformable (False).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>rigid</strong> (<em>bool</em>) &#8211; True for rigid, False for deformable (default)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone2D.set_summit_position">
<tt class="descname">set_summit_position</tt><big>(</big><em>summit_position</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone2D.set_summit_position"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone2D.set_summit_position" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the position of the indenter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>summit_position</strong> (<em>tuple or list containing two floats.</em>) &#8211; position of the summit in a 2D space.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="deformablecone3d-class">
<h3><tt class="docutils literal"><span class="pre">DeformableCone3D</span></tt> class<a class="headerlink" href="#deformablecone3d-class" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="abapy.indentation.DeformableCone3D">
<em class="property">class </em><tt class="descclassname">abapy.indentation.</tt><tt class="descname">DeformableCone3D</tt><big>(</big><em>half_angle=70.3</em>, <em>Na=4</em>, <em>Nb=4</em>, <em>Ns=4</em>, <em>Nf=2</em>, <em>l=1.0</em>, <em>N=4</em>, <em>sweep_angle=45.0</em>, <em>mat_label='INDENTER_MAT'</em>, <em>summit_position=(0.0</em>, <em>0.0)</em>, <em>rigid=True</em>, <em>pyramid=False</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone3D"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone3D" title="Permalink to this definition">¶</a></dt>
<dd><p>A deformable cone usable in 3D simulations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>half_angle</strong> (<em>float &gt; 0.</em>) &#8211; half_angle in DEGREES.</li>
<li><strong>Na</strong> (<em>int</em>) &#8211; number of elements along x axis in the finely meshed contact zone. <em>Must be power of 2</em>.</li>
<li><strong>Nb</strong> (<em>int</em>) &#8211; number of elements along y axis in the finely meshed contact zone. <em>Must be power of 2</em>.</li>
<li><strong>Ns</strong> (<em>int</em>) &#8211; number of radial elements in the shell.</li>
<li><strong>Nf</strong> (<em>int</em>) &#8211; number of orthoradial elements in each half shell. Must be &gt; 0.</li>
<li><strong>l</strong> (<em>float.</em>) &#8211; length of the square zone.</li>
<li><strong>N</strong> (<em>int.</em>) &#8211; Number of sweeped elements.</li>
<li><strong>sweep_angle</strong> &#8211; sweep angle.</li>
<li><strong>mat_label</strong> (<em>any material class instance</em>) &#8211; label of the constitutive material of the indenter.</li>
<li><strong>summit_position</strong> (<em>tuple or list containing two floats.</em>) &#8211; position of the summit in a 2D space.</li>
<li><strong>rigid</strong> &#8211; True if indenter is to be rigid or False if the indenter is to be deformable. If the rigid behavior is chosen, the material label will be necessary but will not influence the results of the simulation.</li>
<li><strong>pyramid</strong> (<em>bool</em>) &#8211; Sets the indenter as a revolution cone (False) or a pyramid (True). I the case of the pyramid, the half angle becomes the axis to face angle.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>For common 3D indenters, following parameters can be used:</p>
<table border="1" class="docutils">
<colgroup>
<col width="37%" />
<col width="32%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Indenter</th>
<th class="head">half_angle</th>
<th class="head">sweep_angle</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Berkovich</td>
<td>65.03</td>
<td>60.00</td>
</tr>
<tr class="row-odd"><td>Modified Berkovich</td>
<td>65.27</td>
<td>60.00</td>
</tr>
<tr class="row-even"><td>Cube Corner</td>
<td>35.26</td>
<td>60.00</td>
</tr>
<tr class="row-odd"><td>Vickers</td>
<td>68.00</td>
<td>45.00</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">abapy.indentation</span> <span class="kn">import</span> <span class="n">DeformableCone3D</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">DeformableCone3D</span><span class="p">(</span><span class="n">Na</span> <span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">Nb</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">Ns</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">N</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">sweep_angle</span> <span class="o">=</span> <span class="mf">120.</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">make_mesh</span><span class="p">()</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;DeformableCone3D.vtk&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">dump2vtk</span><span class="p">())</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">get_edges</span><span class="p">()</span>
<span class="c"># Adding some 3D &quot;home made&quot; perspective:</span>
<span class="n">zx</span><span class="p">,</span> <span class="n">zy</span> <span class="o">=</span> <span class="o">.</span><span class="mi">3</span><span class="p">,</span> <span class="o">.</span><span class="mi">3</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)):</span>
  <span class="k">if</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
    <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">zx</span> <span class="o">*</span> <span class="n">z</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">zy</span> <span class="o">*</span> <span class="n">z</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="./example_code/indentation/DeformableCone3D.py">Source code</a>, <a class="reference external" href="./example_code/indentation/DeformableCone3D.png">png</a>, <a class="reference external" href="./example_code/indentation/DeformableCone3D.hires.png">hires.png</a>, <a class="reference external" href="./example_code/indentation/DeformableCone3D.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/DeformableCone3D.png" src="_images/DeformableCone3D.png" />
</div>
<dl class="method">
<dt id="abapy.indentation.DeformableCone3D.apply_displacement">
<tt class="descname">apply_displacement</tt><big>(</big><em>disp</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone3D.apply_displacement"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone3D.apply_displacement" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies a displacement field to the indenter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>disp</strong> (<tt class="docutils literal"><span class="pre">abapy.postproc.VectorFieldOutput</span></tt> instance.) &#8211; displacement field (with only one location).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone3D.dump2inp">
<tt class="descname">dump2inp</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone3D.dump2inp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone3D.dump2inp" title="Permalink to this definition">¶</a></dt>
<dd><p>Dumps to Abaqus INP format.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone3D.equivalent_half_angle">
<tt class="descname">equivalent_half_angle</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone3D.equivalent_half_angle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone3D.equivalent_half_angle" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the half angle (in degrees) of the equivalent cone in terms of cross area and volume.
:retype: float</p>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone3D.get_border">
<tt class="descname">get_border</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone3D.get_border"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone3D.get_border" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a plotable version of the border of the indenter usable directly in <tt class="docutils literal"><span class="pre">matplotlib.pyplot</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">x and y lists</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone3D.get_edges">
<tt class="descname">get_edges</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone3D.get_edges"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone3D.get_edges" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a plotable version of the indenter usable directly in <tt class="docutils literal"><span class="pre">matplotlib.pyplot</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">x and y lists</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone3D.set_N">
<tt class="descname">set_N</tt><big>(</big><em>N</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone3D.set_N"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone3D.set_N" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the number of sweeped elements</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>N</strong> (<em>int &gt; 1</em>) &#8211; N</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone3D.set_Na">
<tt class="descname">set_Na</tt><big>(</big><em>Na</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone3D.set_Na"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone3D.set_Na" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the Na parameter of the indenter (see <tt class="docutils literal"><span class="pre">IndentationMesh</span></tt> for explanations).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>Na</strong> (<em>int &gt; 1</em>) &#8211; Na</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone3D.set_Nb">
<tt class="descname">set_Nb</tt><big>(</big><em>Nb</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone3D.set_Nb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone3D.set_Nb" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the Nb parameter of the indenter (see <tt class="docutils literal"><span class="pre">IndentationMesh</span></tt> for explanations).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>Nb</strong> (<em>int &gt; 1</em>) &#8211; Nb</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone3D.set_Nf">
<tt class="descname">set_Nf</tt><big>(</big><em>Nf</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone3D.set_Nf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone3D.set_Nf" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the Nf parameter of the indenter (see <tt class="docutils literal"><span class="pre">IndentationMesh</span></tt> for explanations).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>Nf</strong> (<em>int &gt; 1</em>) &#8211; Nf</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone3D.set_Ns">
<tt class="descname">set_Ns</tt><big>(</big><em>Ns</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone3D.set_Ns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone3D.set_Ns" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the Ns parameter of the indenter (see <tt class="docutils literal"><span class="pre">`IndentationMesh</span></tt> for explanations).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>Ns</strong> (<em>int &gt; 1</em>) &#8211; Ns</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone3D.set_half_angle">
<tt class="descname">set_half_angle</tt><big>(</big><em>half_angle=70.3</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone3D.set_half_angle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone3D.set_half_angle" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the half angle of the indenter. Default is equivalent to modified Berkovich indenter in volume.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>half_angle</strong> (<em>float &gt; 0.</em>) &#8211; half_angle in DEGREES.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone3D.set_l">
<tt class="descname">set_l</tt><big>(</big><em>l</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone3D.set_l"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone3D.set_l" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the l parameter of the indenter (see <tt class="docutils literal"><span class="pre">ParamInfiniteMesh</span></tt> for explanations)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>l</strong> (<em>float &gt; 0.</em>) &#8211; l</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone3D.set_mat_label">
<tt class="descname">set_mat_label</tt><big>(</big><em>mat_label</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone3D.set_mat_label"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone3D.set_mat_label" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the label of the constitutive material of the indenter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>mat_label</strong> (<em>string</em>) &#8211; mat_label</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone3D.set_pyramid">
<tt class="descname">set_pyramid</tt><big>(</big><em>pyramid</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone3D.set_pyramid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone3D.set_pyramid" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the indenter as a revolution cone (False) or a pyramid (True). I the case of the pyramid, the half angle becomes the axis to face angle.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pyramid</strong> (<em>bool</em>) &#8211; True for pyramid, False for revolution (default).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone3D.set_rigid">
<tt class="descname">set_rigid</tt><big>(</big><em>rigid</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone3D.set_rigid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone3D.set_rigid" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the indenter to be rigid (True) or deformable (False).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>rigid</strong> (<em>bool</em>) &#8211; True for rigid, False for deformable (default)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone3D.set_summit_position">
<tt class="descname">set_summit_position</tt><big>(</big><em>summit_position</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone3D.set_summit_position"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone3D.set_summit_position" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the position of the indenter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>summit_position</strong> (<em>tuple or list containing two floats.</em>) &#8211; position of the summit in a 2D space.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.DeformableCone3D.set_sweep_angle">
<tt class="descname">set_sweep_angle</tt><big>(</big><em>sweep_angle</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#DeformableCone3D.set_sweep_angle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.DeformableCone3D.set_sweep_angle" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the sweep angle.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>sweep_angle</strong> (<em>int &gt; 1</em>) &#8211; sweep_angle</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="indenter-miscellaneous">
<h3>Indenter miscellaneous<a class="headerlink" href="#indenter-miscellaneous" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="abapy.indentation.equivalent_half_angle">
<tt class="descclassname">abapy.indentation.</tt><tt class="descname">equivalent_half_angle</tt><big>(</big><em>half_angle</em>, <em>sweep_angle</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#equivalent_half_angle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.equivalent_half_angle" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the half angle (in degrees) of the equivalent cone in terms of cross area and volume of a pyramidal indenter.
:param half_angle: indenter half angle in degrees
:type half_angle: float
:param sweep_angle: sweep angle in degrees
:type sweep_angle: float
:rtype: float</p>
</dd></dl>

</div>
</div>
<div class="section" id="simulation-tools">
<h2>Simulation tools<a class="headerlink" href="#simulation-tools" title="Permalink to this headline">¶</a></h2>
<div class="section" id="steps-definition">
<h3>Steps definition<a class="headerlink" href="#steps-definition" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="abapy.indentation.Step">
<em class="property">class </em><tt class="descclassname">abapy.indentation.</tt><tt class="descname">Step</tt><big>(</big><em>name, disp=1.0, nlgeom=True, nframes=100, fieldOutputFreq=999999, boundaries_3D=False, full_3D=False, rigid_indenter_3D=True, nodeFieldOutput=['COORD', 'U'], elemFieldOutput=['LE', 'EE', 'PE', 'PEEQ', 'S'], mode='bulk'</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Step"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Step" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds a typical indentation step.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<em>string</em>) &#8211; step name.</li>
<li><strong>disp</strong> (<em>float &gt; 0.</em>) &#8211; displacement.</li>
<li><strong>nframes</strong> (<em>int</em>) &#8211; frame number.</li>
<li><strong>nlgeom</strong> (<em>boolean</em>) &#8211; nlgeom state.</li>
<li><strong>fieldOutputFreq</strong> (<em>int</em>) &#8211; field output frequency</li>
<li><strong>boundaries_3D</strong> (<em>boolean</em>) &#8211; 3D or 2D boundary conditions. If 3D is True, then boundary conditions will be applied to the node sets <tt class="docutils literal"><span class="pre">front</span></tt> and <tt class="docutils literal"><span class="pre">back</span></tt>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>: param full_3D: set to True if the model is a complete 3D model without symmetries and then does not need side boundaries.
:type full_3D: boolean
:param rigid_indenter_3D: Set to True if a 3D indenter is rigid  
:type rigid_indenter_3D: boolean
:param nodeFieldOutput: node outputs.
:type nodeFieldOutput: string or list of strings
:param elemFieldOutput: node outputs.
:type elemFieldOutput: string or list of strings</p>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.Step.set_name">
<tt class="descclassname">Step.</tt><tt class="descname">set_name</tt><big>(</big><em>name</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Step.set_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Step.set_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets step name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> (<em>string</em>) &#8211; step name.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.Step.set_displacement">
<tt class="descclassname">Step.</tt><tt class="descname">set_displacement</tt><big>(</big><em>disp</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Step.set_displacement"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Step.set_displacement" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the displacement.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>disp</strong> (<em>float &gt; 0.</em>) &#8211; displacement.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.Step.set_nframes">
<tt class="descclassname">Step.</tt><tt class="descname">set_nframes</tt><big>(</big><em>nframes</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Step.set_nframes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Step.set_nframes" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the number of frames.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>nframes</strong> (<em>int</em>) &#8211; frame number.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.Step.set_nlgeom">
<tt class="descclassname">Step.</tt><tt class="descname">set_nlgeom</tt><big>(</big><em>nlgeom</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Step.set_nlgeom"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Step.set_nlgeom" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets NLGEOM on or off.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>nlgeom</strong> (<em>boolean</em>) &#8211; nlgeom state.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.Step.set_fieldOutputFreq">
<tt class="descclassname">Step.</tt><tt class="descname">set_fieldOutputFreq</tt><big>(</big><em>freq</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Step.set_fieldOutputFreq"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Step.set_fieldOutputFreq" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the field output period.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>freq</strong> (<em>int</em>) &#8211; field output frequency</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.Step.set_nodeFieldOutput">
<tt class="descclassname">Step.</tt><tt class="descname">set_nodeFieldOutput</tt><big>(</big><em>nodeOutput</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Step.set_nodeFieldOutput"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Step.set_nodeFieldOutput" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the node field output to be recorded.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>nodeOutput</strong> (<em>string or list of strings</em>) &#8211; node outputs.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.Step.set_elemFieldOutput">
<tt class="descclassname">Step.</tt><tt class="descname">set_elemFieldOutput</tt><big>(</big><em>elemOutput</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Step.set_elemFieldOutput"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Step.set_elemFieldOutput" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the element field output to be recorded.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>elemOutput</strong> (<em>string or list of strings</em>) &#8211; node outputs.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.Step.dump2inp">
<tt class="descclassname">Step.</tt><tt class="descname">dump2inp</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Step.dump2inp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Step.dump2inp" title="Permalink to this definition">¶</a></dt>
<dd><p>Dumps the step to Abaqus INP format.</p>
</dd></dl>

</div>
<div class="section" id="inp-builder">
<h3>Inp builder<a class="headerlink" href="#inp-builder" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="abapy.indentation.MakeInp">
<tt class="descclassname">abapy.indentation.</tt><tt class="descname">MakeInp</tt><big>(</big><em>sample_mesh=None</em>, <em>indenter=None</em>, <em>sample_mat=None</em>, <em>indenter_mat=None</em>, <em>friction=0.0</em>, <em>steps=None</em>, <em>is_3D=False</em>, <em>heading='Abapy Indentation Simulation'</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#MakeInp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.MakeInp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="simulation-manager">
<h3>Simulation manager<a class="headerlink" href="#simulation-manager" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="abapy.indentation.Manager">
<em class="property">class </em><tt class="descclassname">abapy.indentation.</tt><tt class="descname">Manager</tt><big>(</big><em>workdir='', abqlauncher='abaqus', samplemesh=None, indenter=None, samplemat=None, indentermat=None, friction=0.0, steps=None, is_3D=False, simname='indentation', files2delete=['sta', 'sim', 'prt', 'odb', 'msg', 'log', 'dat', 'com', 'inp', 'lck', 'pckl'], abqpostproc='abqpostproc.py'</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Manager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Manager" title="Permalink to this definition">¶</a></dt>
<dd><p>The spirit of the simulation manager is to allow you to work at a higher level.   Using it allows you to define once and for all where you work, where Abaqus is, it fill manage subprocesses (Abaqus, Abaqus python) automatically. It is particularly interresting to perform parametric simulation because you can modify one parameter (material property, inenter property, ...) and keep all other parameters fixed and rerun directly the simulation process without making any mistake.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This class is still under developpement, important changes may then happen.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>workdir</strong> (<em>string</em>) &#8211; work directory where simulation is to be run.</li>
<li><strong>abqlauncher</strong> (<em>string</em>) &#8211; abaqus launcher or path to it. Take care about aliases under linux because they often don&#8217;t work under non interactive shells. A direct path to the launcher may be a good idea.</li>
<li><strong>samplemesh</strong> (<tt class="docutils literal"><span class="pre">abapy.mesh.Mesh</span></tt> instance or None) &#8211; mesh to be used by <tt class="docutils literal"><span class="pre">MakeInp</span></tt>, None will let <tt class="docutils literal"><span class="pre">MakeInp</span></tt> use it&#8217;s own default.</li>
<li><strong>indenter</strong> (<em>indenter instance or None</em>) &#8211; indenter to be used by <tt class="docutils literal"><span class="pre">MakeInp</span></tt>, None will let <tt class="docutils literal"><span class="pre">MakeInp</span></tt> use it&#8217;s own default.</li>
<li><strong>samplemat</strong> (<em>material instance or None</em>) &#8211; sample material to be used by <tt class="docutils literal"><span class="pre">MakeInp</span></tt>, None will let <tt class="docutils literal"><span class="pre">MakeInp</span></tt> use it&#8217;s own default.</li>
<li><strong>indentermat</strong> (<em>material instance or None</em>) &#8211; indenter material to be used by <tt class="docutils literal"><span class="pre">MakeInp</span></tt>, None will let <tt class="docutils literal"><span class="pre">MakeInp</span></tt> use it&#8217;s own default.</li>
<li><strong>steps</strong> (list of <tt class="docutils literal"><span class="pre">Step</span></tt> instances.) &#8211; steps to use during the test.</li>
<li><strong>is_3D</strong> (<em>Bool</em>) &#8211; has to be True if the simulation is 3D, else must be False.</li>
<li><strong>simname</strong> (<em>string</em>) &#8211; simulation name used for all files.</li>
<li><strong>files2delete</strong> (<em>list of strings.</em>) &#8211; file types to delete when cleaning work directory.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">abapy.indentation</span> <span class="kn">import</span> <span class="n">Manager</span><span class="p">,</span> <span class="n">IndentationMesh</span><span class="p">,</span> <span class="n">Step</span><span class="p">,</span> <span class="n">RigidCone2D</span><span class="p">,</span> <span class="n">DeformableCone2D</span>
<span class="kn">from</span> <span class="nn">abapy.materials</span> <span class="kn">import</span> <span class="n">VonMises</span><span class="p">,</span> <span class="n">Elastic</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">radians</span><span class="p">,</span> <span class="n">tan</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="c">#---------------------------------------</span>
<span class="c"># Python post processing function:</span>
<span class="c"># Role: data extraction from odb is performed in Abaqus python but nothing more. A regular Python version featuring numpy/scipy and matplotlib is so much better to perform custom post processing. That&#39;s why we do it in two steps: what cannot be done out of abaqus is done in abaqus, everything else is performed outside.</span>
<span class="k">def</span> <span class="nf">pypostproc</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
  <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;completed&#39;</span><span class="p">]:</span>
    <span class="k">return</span> <span class="n">data</span>
  <span class="k">else</span><span class="p">:</span> 
    <span class="k">print</span> <span class="s">&#39;&lt;Warning: Simulation aborted, check .msg file for explanations.&gt;&#39;</span>
    <span class="k">return</span> <span class="n">data</span>
<span class="c">#---------------------------------------    </span>
<span class="c"># Defining test parameters:</span>
<span class="n">Na</span><span class="p">,</span> <span class="n">Nb</span><span class="p">,</span> <span class="n">Ns</span><span class="p">,</span> <span class="n">Nf</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">2</span>
<span class="n">half_angle</span> <span class="o">=</span> <span class="mf">70.29</span>
<span class="n">rigid_indenter</span> <span class="o">=</span> <span class="bp">False</span> <span class="c"># Sets the indenter rigid of deformable</span>
<span class="n">mesh</span> <span class="o">=</span> <span class="n">IndentationMesh</span><span class="p">(</span><span class="n">Na</span> <span class="o">=</span> <span class="n">Na</span><span class="p">,</span> <span class="n">Nb</span> <span class="o">=</span> <span class="n">Nb</span><span class="p">,</span> <span class="n">Ns</span> <span class="o">=</span> <span class="n">Ns</span><span class="p">,</span> <span class="n">Nf</span> <span class="o">=</span> <span class="n">Nf</span><span class="p">)</span>                <span class="c"># Chosing sample mesh</span>
<span class="c">#indenter = RigidCone2D(half_angle = 70.3)                 # Chosing indenter</span>
<span class="n">indenter</span> <span class="o">=</span> <span class="n">DeformableCone2D</span><span class="p">(</span><span class="n">half_angle</span> <span class="o">=</span> <span class="n">half_angle</span><span class="p">,</span> <span class="n">Na</span> <span class="o">=</span> <span class="n">Na</span><span class="p">,</span> <span class="n">Nb</span> <span class="o">=</span> <span class="n">Nb</span><span class="p">,</span> <span class="n">Ns</span><span class="o">=</span><span class="n">Ns</span><span class="p">,</span> <span class="n">Nf</span><span class="o">=</span><span class="n">Nf</span><span class="p">,</span> <span class="n">rigid</span> <span class="o">=</span> <span class="n">rigid_indenter</span><span class="p">)</span>  
<span class="n">E</span> <span class="o">=</span> <span class="mf">1.</span>                                                    <span class="c"># Young&#39;s modulus</span>
<span class="n">sy</span> <span class="o">=</span> <span class="n">E</span> <span class="o">*</span> <span class="o">.</span><span class="mo">01</span>                                              <span class="c"># Yield stress</span>
<span class="n">samplemat</span> <span class="o">=</span> <span class="n">VonMises</span><span class="p">(</span><span class="n">labels</span> <span class="o">=</span> <span class="s">&#39;SAMPLE_MAT&#39;</span><span class="p">,</span> <span class="n">E</span> <span class="o">=</span> <span class="n">E</span><span class="p">,</span> <span class="n">sy</span> <span class="o">=</span> <span class="n">sy</span><span class="p">)</span>   <span class="c"># Sample material</span>
<span class="n">indentermat</span> <span class="o">=</span> <span class="n">Elastic</span><span class="p">(</span><span class="n">labels</span> <span class="o">=</span> <span class="s">&#39;INDENTER_MAT&#39;</span><span class="p">,</span> <span class="n">E</span> <span class="o">=</span> <span class="n">E</span><span class="p">)</span> 
<span class="n">max_disp</span> <span class="o">=</span> <span class="o">.</span><span class="mi">3</span> <span class="o">*</span> <span class="n">tan</span><span class="p">(</span><span class="n">radians</span><span class="p">(</span><span class="mf">70.3</span><span class="p">))</span><span class="o">/</span><span class="n">tan</span><span class="p">(</span><span class="n">radians</span><span class="p">(</span><span class="n">half_angle</span><span class="p">))</span>
<span class="n">nframes</span> <span class="o">=</span> <span class="mi">200</span>
<span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>                                                 <span class="c"># Steps</span>
  <span class="n">Step</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;loading0&#39;</span><span class="p">,</span> <span class="n">nframes</span> <span class="o">=</span> <span class="n">nframes</span><span class="p">,</span> <span class="n">disp</span> <span class="o">=</span> <span class="n">max_disp</span><span class="o">/</span><span class="mf">2.</span><span class="p">),</span>
  <span class="n">Step</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;loading1&#39;</span><span class="p">,</span> <span class="n">nframes</span> <span class="o">=</span> <span class="n">nframes</span><span class="p">,</span> <span class="n">disp</span> <span class="o">=</span> <span class="n">max_disp</span><span class="p">),</span> 
  <span class="n">Step</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;unloading&#39;</span><span class="p">,</span> <span class="n">nframes</span> <span class="o">=</span> <span class="n">nframes</span><span class="p">,</span> <span class="n">disp</span> <span class="o">=</span> <span class="mf">0.</span><span class="p">)]</span> 
<span class="c">#---------------------------------------</span>
<span class="c"># Directories: absolute pathes seems more secure to me since we are running some &#39;rm&#39;. </span>
<span class="n">workdir</span> <span class="o">=</span> <span class="s">&#39;workdir/&#39;</span>
<span class="n">abqlauncher</span> <span class="o">=</span> <span class="s">&#39;/opt/Abaqus/6.9/Commands/abaqus&#39;</span>
<span class="n">simname</span> <span class="o">=</span> <span class="s">&#39;indentation&#39;</span>
<span class="n">abqpostproc</span> <span class="o">=</span> <span class="s">&#39;abqpostproc.py&#39;</span>
<span class="c">#---------------------------------------</span>
<span class="c"># Setting simulation manager</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">Manager</span><span class="p">()</span>
<span class="n">m</span><span class="o">.</span><span class="n">set_abqlauncher</span><span class="p">(</span><span class="n">abqlauncher</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">set_workdir</span><span class="p">(</span><span class="n">workdir</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">set_simname</span><span class="p">(</span><span class="n">simname</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">set_abqpostproc</span><span class="p">(</span><span class="n">abqpostproc</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">set_samplemesh</span><span class="p">(</span><span class="n">mesh</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">set_samplemat</span><span class="p">(</span><span class="n">samplemat</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">set_indentermat</span><span class="p">(</span><span class="n">indentermat</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">set_steps</span><span class="p">(</span><span class="n">steps</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">set_indenter</span><span class="p">(</span><span class="n">indenter</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">set_pypostprocfunc</span><span class="p">(</span><span class="n">pypostproc</span><span class="p">)</span>
<span class="c">#---------------------------------------</span>
<span class="c"># Running simulation and post processing</span>
<span class="c">#m.erase_files() # Workdir cleaning</span>
<span class="n">m</span><span class="o">.</span><span class="n">make_inp</span><span class="p">()</span> <span class="c"># INP creation</span>
<span class="c">#m.run_sim() # Running the simulation</span>
<span class="c">#m.run_abqpostproc() # First round of post processing in Abaqus</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">run_pypostproc</span><span class="p">()</span> <span class="c"># Second round of custom post processing in regular Python</span>

<span class="c">#---------------------------------------</span>

<span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;completed&#39;</span><span class="p">]:</span>
  <span class="c"># Ploting results</span>
  <span class="n">step2plot</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="n">Nlevels</span> <span class="o">=</span> <span class="mi">200</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
  <span class="c"># Ploting load vs. disp curve</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">clf</span><span class="p">()</span>
  <span class="n">ho</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;history&#39;</span><span class="p">]</span>
  <span class="n">F</span> <span class="o">=</span> <span class="o">-</span><span class="n">ho</span><span class="p">[</span><span class="s">&#39;force&#39;</span><span class="p">]</span>
  <span class="n">h</span> <span class="o">=</span> <span class="o">-</span><span class="n">ho</span><span class="p">[</span><span class="s">&#39;disp&#39;</span><span class="p">]</span>
  <span class="n">C</span> <span class="o">=</span> <span class="p">(</span><span class="n">F</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="n">h</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">average</span><span class="p">()</span>
  <span class="n">F_fit</span> <span class="o">=</span> <span class="n">C</span> <span class="o">*</span> <span class="n">h</span> <span class="o">**</span><span class="mi">2</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">plotable</span><span class="p">()[</span><span class="mi">1</span><span class="p">],</span> <span class="n">F</span><span class="o">.</span><span class="n">plotable</span><span class="p">()[</span><span class="mi">1</span><span class="p">],</span> <span class="s">&#39;b-&#39;</span><span class="p">,</span><span class="n">label</span> <span class="o">=</span> <span class="s">&#39;Simulated curve&#39;</span><span class="p">,</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="mf">1.</span><span class="p">)</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">h</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plotable</span><span class="p">()[</span><span class="mi">1</span><span class="p">],</span> <span class="n">F_fit</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plotable</span><span class="p">()[</span><span class="mi">1</span><span class="p">],</span><span class="s">&#39;r-&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s">&#39;fitted loading curve&#39;</span><span class="p">,</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="mf">1.</span><span class="p">)</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">&#39;Displacement $h$&#39;</span><span class="p">)</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">&#39;Force $P$&#39;</span><span class="p">)</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">workdir</span> <span class="o">+</span> <span class="n">simname</span> <span class="o">+</span> <span class="s">&#39;_load-disp.png&#39;</span><span class="p">)</span>
  <span class="c"># Ploting deformed shape</span>
  
  <span class="n">plt</span><span class="o">.</span><span class="n">clf</span><span class="p">()</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s">&#39;equal&#39;</span><span class="p">)</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s">&#39;off&#39;</span><span class="p">)</span>
  <span class="n">fo</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;field&#39;</span><span class="p">]</span>
  <span class="c">#stress = fo[&#39;S&#39;][step2plot].vonmises()</span>
  <span class="n">stress</span> <span class="o">=</span> <span class="n">fo</span><span class="p">[</span><span class="s">&#39;S&#39;</span><span class="p">][</span><span class="n">step2plot</span><span class="p">]</span><span class="o">.</span><span class="n">pressure</span><span class="p">()</span>
  <span class="k">if</span> <span class="s">&#39;Sind&#39;</span> <span class="ow">in</span> <span class="n">fo</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
    <span class="c">#ind_stress = fo[&#39;Sind&#39;][step2plot].vonmises()</span>
    <span class="n">ind_stress</span> <span class="o">=</span> <span class="n">fo</span><span class="p">[</span><span class="s">&#39;Sind&#39;</span><span class="p">][</span><span class="n">step2plot</span><span class="p">]</span><span class="o">.</span><span class="n">pressure</span><span class="p">()</span>
  <span class="n">smax</span><span class="o">=</span> <span class="nb">max</span><span class="p">(</span> <span class="nb">max</span><span class="p">(</span><span class="n">stress</span><span class="o">.</span><span class="n">data</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">ind_stress</span><span class="o">.</span><span class="n">data</span><span class="p">))</span>
  <span class="n">smin</span><span class="o">=</span> <span class="nb">min</span><span class="p">(</span> <span class="nb">min</span><span class="p">(</span><span class="n">stress</span><span class="o">.</span><span class="n">data</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">ind_stress</span><span class="o">.</span><span class="n">data</span><span class="p">))</span> 
  <span class="c">#levels = [(n+1)/float(Nlevels)*smax for n in xrange(Nlevels)]  </span>
  <span class="n">levels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">smin</span><span class="p">,</span> <span class="n">smax</span><span class="p">,</span> <span class="n">Nlevels</span><span class="p">)</span>
  <span class="n">field_flag</span> <span class="o">=</span> <span class="s">r&#39;$\sigma_{eq}$&#39;</span>
  <span class="n">disp</span> <span class="o">=</span> <span class="n">fo</span><span class="p">[</span><span class="s">&#39;U&#39;</span><span class="p">][</span><span class="n">step2plot</span><span class="p">]</span>
  <span class="n">ind_disp</span> <span class="o">=</span> <span class="n">fo</span><span class="p">[</span><span class="s">&#39;Uind&#39;</span><span class="p">][</span><span class="n">step2plot</span><span class="p">]</span>
  <span class="n">indenter</span><span class="o">.</span><span class="n">apply_displacement</span><span class="p">(</span><span class="n">ind_disp</span><span class="p">)</span> <span class="c"># Applies the displacement to the indenter.</span>
  
  <span class="c">#plt.plot(xbi,ybi,&#39;k-&#39;)</span>
  <span class="n">mesh</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">apply_displacement</span><span class="p">(</span><span class="n">disp</span><span class="p">)</span> <span class="c"># This Nodes class method allows to deform a Nodes instance (and the Mesh instance it&#39;s nested in by the way) using a VectorFieldOutput. This allows very easy mesh tuning and deformed shape ploting.</span>
  <span class="n">xlim</span><span class="p">,</span> <span class="n">ylim</span><span class="p">,</span> <span class="n">zlim</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">boundingBox</span><span class="p">()</span> <span class="c"># This little method allows nicer ploting producing a bounding box with a little gap around the mesh. This avoids the very tight boxes pyplot tends to use which cut thick lines on the border of the mesh.</span>
  <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">2.</span>
  <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="o">-</span><span class="mf">2.</span><span class="p">,</span> <span class="mf">2.</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">([</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">])</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">([</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">])</span>
  <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">tri</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">dump2triplot</span><span class="p">()</span> <span class="c"># This method translates the whole mesh in matplotlib.pyplot.triplot syntax: x coords, y coords, (z coords useless here but can be nice for perspective effects) and label less connectivity.</span>
  <span class="n">xi</span><span class="p">,</span> <span class="n">yi</span><span class="p">,</span> <span class="n">zi</span><span class="p">,</span> <span class="n">trii</span> <span class="o">=</span> <span class="n">indenter</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">dump2triplot</span><span class="p">()</span>
  <span class="n">xe</span><span class="p">,</span> <span class="n">ye</span><span class="p">,</span> <span class="n">ze</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">get_edges</span><span class="p">(</span><span class="n">xmin</span> <span class="o">=</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span> <span class="o">=</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">ymax</span><span class="p">)</span>
  <span class="n">xb</span><span class="p">,</span> <span class="n">yb</span><span class="p">,</span> <span class="n">zb</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">get_border</span><span class="p">(</span><span class="n">xmin</span> <span class="o">=</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span> <span class="o">=</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">ymax</span><span class="p">)</span>
  <span class="n">xei</span><span class="p">,</span> <span class="n">yei</span><span class="p">,</span> <span class="n">zei</span> <span class="o">=</span> <span class="n">indenter</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">get_edges</span><span class="p">(</span><span class="n">xmin</span> <span class="o">=</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span> <span class="o">=</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">ymax</span><span class="p">)</span> <span class="c"># Gives us a wireframe indenter representation.</span>
  <span class="n">xbi</span><span class="p">,</span> <span class="n">ybi</span><span class="p">,</span> <span class="n">zbi</span> <span class="o">=</span> <span class="n">indenter</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">get_border</span><span class="p">(</span><span class="n">xmin</span> <span class="o">=</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span> <span class="o">=</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">ymax</span><span class="p">)</span> <span class="c"># Gives us the border of the indenter.</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xe</span><span class="p">,</span><span class="n">ye</span><span class="p">,</span><span class="s">&#39;-k&#39;</span><span class="p">,</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">)</span> <span class="c"># Mesh ploting.</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xb</span><span class="p">,</span><span class="n">yb</span><span class="p">,</span><span class="s">&#39;-k&#39;</span><span class="p">,</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="mf">1.</span><span class="p">)</span> <span class="c"># Sample border ploting.</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xei</span><span class="p">,</span><span class="n">yei</span><span class="p">,</span><span class="s">&#39;-k&#39;</span><span class="p">,</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">)</span> <span class="c"># Mesh ploting.</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xbi</span><span class="p">,</span><span class="n">ybi</span><span class="p">,</span><span class="s">&#39;-k&#39;</span><span class="p">,</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="mf">1.</span><span class="p">)</span> <span class="c"># Sample border ploting.</span>
  <span class="n">grad</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">tricontourf</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">tri</span><span class="p">,</span> <span class="n">stress</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">levels</span><span class="p">)</span> <span class="c"># Gradiant plot, Nlevels specifies the number of levels.</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">tricontourf</span><span class="p">(</span><span class="n">xi</span><span class="p">,</span><span class="n">yi</span><span class="p">,</span><span class="n">trii</span><span class="p">,</span> <span class="n">ind_stress</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">levels</span><span class="p">)</span>
  <span class="c">#plt.tricontour(xi,yi,trii, ind_stress.data, levels,  colors = &#39;black&#39;)</span>
  <span class="n">cbar</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">grad</span><span class="p">)</span>
  <span class="n">cbar</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">field_flag</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
  <span class="c">#plt.tricontour(x, y, tri, stress.data, levels,  colors = &#39;black&#39;) # Isovalue plot which make gradiant plot clearer in my (humble) opinion.</span>
  <span class="c">#plt.show()</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">workdir</span> <span class="o">+</span> <span class="n">simname</span> <span class="o">+</span> <span class="s">&#39;_field.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Gives:</p>
<img alt="example_code/indentation/workdir/indentation_field.png" src="example_code/indentation/workdir/indentation_field.png" />
<img alt="example_code/indentation/workdir/indentation_load-disp.png" src="example_code/indentation/workdir/indentation_load-disp.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In order to used abaqus Python, you have to build a post processing script that is executed in <tt class="docutils literal"><span class="pre">abaqus</span> <span class="pre">python</span></tt>. Here is an example <tt class="xref download docutils literal"><span class="pre">abqpostproc.py</span></tt>:</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This class is still unfinished, post processing part remains unwritten (LC, April 12 2012)</p>
</div>
</dd></dl>

<div class="section" id="settings">
<h4>Settings<a class="headerlink" href="#settings" title="Permalink to this headline">¶</a></h4>
<dl class="method">
<dt id="abapy.indentation.Manager.set_simname">
<tt class="descclassname">Manager.</tt><tt class="descname">set_simname</tt><big>(</big><em>simname</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Manager.set_simname"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Manager.set_simname" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets simname.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>simname</strong> (<em>string</em>) &#8211; simulation name that is used to name simulation files.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.Manager.set_workdir">
<tt class="descclassname">Manager.</tt><tt class="descname">set_workdir</tt><big>(</big><em>workdir</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Manager.set_workdir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Manager.set_workdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets work directory</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>workdir</strong> (<em>string</em>) &#8211; relative or absolute path to workdir where simulations are run.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.Manager.set_abqlauncher">
<tt class="descclassname">Manager.</tt><tt class="descname">set_abqlauncher</tt><big>(</big><em>abqlauncher</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Manager.set_abqlauncher"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Manager.set_abqlauncher" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets Abaqus launcher
:param abqlauncher: alias, relative path or absolute path to abaqus launcher. 
:type abqlaucher: string</p>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.Manager.set_samplemesh">
<tt class="descclassname">Manager.</tt><tt class="descname">set_samplemesh</tt><big>(</big><em>samplemesh</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Manager.set_samplemesh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Manager.set_samplemesh" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets sample mesh.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>samplemesh</strong> (<tt class="docutils literal"><span class="pre">abapy.mesh.Mesh</span></tt> instance) &#8211; sample mesh.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.Manager.set_indenter">
<tt class="descclassname">Manager.</tt><tt class="descname">set_indenter</tt><big>(</big><em>indenter</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Manager.set_indenter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Manager.set_indenter" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets indenter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>indenter</strong> (<em>instance of any indenter class</em>) &#8211; indenter to be used.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.Manager.set_samplemat">
<tt class="descclassname">Manager.</tt><tt class="descname">set_samplemat</tt><big>(</big><em>samplemat</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Manager.set_samplemat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Manager.set_samplemat" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets sample material.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>samplemat</strong> (<em>instance of any material class</em>) &#8211; core material.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.Manager.set_steps">
<tt class="descclassname">Manager.</tt><tt class="descname">set_steps</tt><big>(</big><em>steps</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Manager.set_steps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Manager.set_steps" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets steps</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>steps</strong> (list <tt class="docutils literal"><span class="pre">of</span> <span class="pre">Steps</span></tt> instances) &#8211; description of steps.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.Manager.set_files2delete">
<tt class="descclassname">Manager.</tt><tt class="descname">set_files2delete</tt><big>(</big><em>files2delete</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Manager.set_files2delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Manager.set_files2delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets files to delete when cleaning.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>files2delete</strong> (<em>list of strings.</em>) &#8211; files types to be deleted when cleaning workdir.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.Manager.set_abqpostproc">
<tt class="descclassname">Manager.</tt><tt class="descname">set_abqpostproc</tt><big>(</big><em>abqpostproc</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Manager.set_abqpostproc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Manager.set_abqpostproc" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the path to the abaqus post-processing python script, this path must be absolute or relative to workdir.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>abqpostproc</strong> (<em>string</em>) &#8211; link to the abaqus post processing script.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.Manager.set_pypostprocfunc">
<tt class="descclassname">Manager.</tt><tt class="descname">set_pypostprocfunc</tt><big>(</big><em>func</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Manager.set_pypostprocfunc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Manager.set_pypostprocfunc" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the Python post processing function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>func</strong> (<em>function</em>) &#8211; post processing function of the data produced by abaqus post processing.</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="launchers">
<h4>Launchers<a class="headerlink" href="#launchers" title="Permalink to this headline">¶</a></h4>
<dl class="method">
<dt id="abapy.indentation.Manager.erase_files">
<tt class="descclassname">Manager.</tt><tt class="descname">erase_files</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Manager.erase_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Manager.erase_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Erases all files with types declared in files2delete in the work directory with the name <em>simname</em>.</p>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.Manager.make_inp">
<tt class="descclassname">Manager.</tt><tt class="descname">make_inp</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Manager.make_inp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Manager.make_inp" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds the INP file using <tt class="docutils literal"><span class="pre">MakeInp</span></tt> and stores it in workdir as &#8220;simname.inp&#8221;.</p>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.Manager.run_sim">
<tt class="descclassname">Manager.</tt><tt class="descname">run_sim</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Manager.run_sim"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Manager.run_sim" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the simulation.</p>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.Manager.run_abqpostproc">
<tt class="descclassname">Manager.</tt><tt class="descname">run_abqpostproc</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Manager.run_abqpostproc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Manager.run_abqpostproc" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the first pass of post processing inside Abaqus Python.</p>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.Manager.run_pypostproc">
<tt class="descclassname">Manager.</tt><tt class="descname">run_pypostproc</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Manager.run_pypostproc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Manager.run_pypostproc" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the Python post processing function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">data returned by pypostprocfunc</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="indentation-post-processing">
<h3>Indentation post-processing<a class="headerlink" href="#indentation-post-processing" title="Permalink to this headline">¶</a></h3>
<div class="section" id="contact-data">
<h4>Contact Data<a class="headerlink" href="#contact-data" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="abapy.indentation.ContactData">
<em class="property">class </em><tt class="descclassname">abapy.indentation.</tt><tt class="descname">ContactData</tt><big>(</big><em>repeat=3</em>, <em>is_3D=False</em>, <em>dtf='f'</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#ContactData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.ContactData" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>ContactData class aims to store and proceed all contact related data:</p>
<ul class="simple">
<li>Position of nodes involved in the contact relationship.</li>
<li>Contact pressure on these nodes.</li>
</ul>
<p>This class can be used to perform various tasks:</p>
<ul class="simple">
<li>Find contact shape.</li>
<li>Compute contact area.</li>
<li>Find contact contour.</li>
<li>Produce matrix (AFM-like) images using the SPYM module.</li>
</ul>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>repeat</strong> (<em>int &gt; 0</em>) &#8211; this parameter is only used in the case of 3D contact. Due to symmetries, only a portion of the problem is computed. To get back to complete problem, a symmetry has to be performed and then a given number of copies of the result, this number is repeat. For example, to simulate a Vickers 4 sided indenter indentation, you will compute only 1 / 8 of the problem. So after a symmetry, you will need 4 copies of the result, the repeat = 4. To summarize, repeat is the number of faces of the indenter.</li>
<li><strong>is_3D</strong> (<em>bool</em>) &#8211; True for 3D contact, False for axisymmetric contact.</li>
<li><strong>dtf</strong> (<em>string</em>) &#8211; <tt class="docutils literal"><span class="pre">array.array</span></tt> data type for floats, &#8216;f&#8217; for 32 bit float, &#8216;d&#8217; for 64 float.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">abapy.indentation</span> <span class="kn">import</span> <span class="n">ContactData</span>

<span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mf">3.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">,</span> <span class="mi">512</span><span class="p">)</span>
<span class="n">Y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mf">3.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">,</span> <span class="mi">512</span><span class="p">)</span>
<span class="n">X</span><span class="p">,</span> <span class="n">Y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">)</span>
<span class="c"># Axi</span>
<span class="n">cd</span> <span class="o">=</span> <span class="n">ContactData</span><span class="p">()</span>
<span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
<span class="n">alt</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">press</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">cd</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">altitude</span> <span class="o">=</span> <span class="n">alt</span><span class="p">,</span> <span class="n">pressure</span> <span class="o">=</span> <span class="n">press</span><span class="p">)</span>
<span class="n">Alt_axi</span><span class="p">,</span> <span class="n">Press_axi</span> <span class="o">=</span> <span class="n">cd</span><span class="o">.</span><span class="n">interpolate</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span><span class="s">&#39;linear&#39;</span><span class="p">)</span>
<span class="n">area</span> <span class="o">=</span> <span class="n">cd</span><span class="o">.</span><span class="n">contact_area</span><span class="p">()</span>


<span class="c"># 3D</span>
<span class="n">cd</span> <span class="o">=</span> <span class="n">ContactData</span><span class="p">(</span><span class="n">repeat</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">is_3D</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<span class="n">k</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">60</span><span class="p">))</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">60</span><span class="p">))</span>
<span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">k</span><span class="o">*</span><span class="mi">4</span><span class="p">,</span> <span class="n">k</span><span class="o">*</span><span class="mi">10</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>  <span class="n">p</span><span class="o">*</span><span class="mi">4</span><span class="p">,</span> <span class="n">p</span><span class="o">*</span><span class="mi">10</span><span class="p">]</span>
<span class="n">alt</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">cd</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">altitude</span> <span class="o">=</span> <span class="n">alt</span><span class="p">)</span>
<span class="n">Alt_3D</span><span class="p">,</span> <span class="n">Press_3D</span> <span class="o">=</span> <span class="n">cd</span><span class="o">.</span><span class="n">interpolate</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span><span class="s">&#39;linear&#39;</span><span class="p">)</span>


<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">clf</span><span class="p">()</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">121</span><span class="p">)</span>
<span class="n">grad</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">Alt_axi</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">contour</span><span class="p">(</span><span class="n">Alt_axi</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span> <span class="s">&#39;black&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">&#39;axi contact&#39;</span><span class="p">)</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">122</span><span class="p">)</span>
<span class="n">grad</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">Alt_3D</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">contour</span><span class="p">(</span><span class="n">Alt_3D</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span> <span class="s">&#39;black&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">&#39;3D contact&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="./example_code/indentation/ContactData.py">Source code</a>, <a class="reference external" href="./example_code/indentation/ContactData.png">png</a>, <a class="reference external" href="./example_code/indentation/ContactData.hires.png">hires.png</a>, <a class="reference external" href="./example_code/indentation/ContactData.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/ContactData.png" src="_images/ContactData.png" />
</div>
<dl class="method">
<dt id="abapy.indentation.ContactData.add_data">
<tt class="descname">add_data</tt><big>(</big><em>coor1</em>, <em>coor2=0.0</em>, <em>altitude=0.0</em>, <em>pressure=0.0</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#ContactData.add_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.ContactData.add_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds data to a ContactData instance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>coor1</strong> (<em>float or list like</em>) &#8211; radial position in the axisymmetric case or in plane position first coordinate in the 3D case.</li>
<li><strong>coor2</strong> (<em>float of list like</em>) &#8211; orthoradial position in the axisymmetric case of second in plane coordinate in the 3D case.</li>
<li><strong>altitude</strong> (<em>float or list like</em>) &#8211; out of plane position.</li>
<li><strong>pressure</strong> (<em>float or list like</em>) &#8211; normal contact pressure.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.ContactData.contact_area">
<tt class="descname">contact_area</tt><big>(</big><em>delaunay_disp=None</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#ContactData.contact_area"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.ContactData.contact_area" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the cross area of contact using the contact pressure field. The contact area is computed using a Delaunay triangulation of the available data points. This triangulation can be oriented using the delaunay_disp option (use very carefuly).</p>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.ContactData.contact_contour">
<tt class="descname">contact_contour</tt><big>(</big><em>delaunay_disp=None</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#ContactData.contact_contour"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.ContactData.contact_contour" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the contour of the contact zone.</p>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.ContactData.export2spym">
<tt class="descname">export2spym</tt><big>(</big><em>lx</em>, <em>ly</em>, <em>xc=0.0</em>, <em>yc=0.0</em>, <em>nx=256</em>, <em>ny=256</em>, <em>xy_unit='m'</em>, <em>alt_unit='m'</em>, <em>press_unit='Pa'</em>, <em>axi_repeat=100</em>, <em>delaunay_disp=None</em>, <em>method='linear'</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#ContactData.export2spym"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.ContactData.export2spym" title="Permalink to this definition">¶</a></dt>
<dd><p>Exports data to <tt class="docutils literal"><span class="pre">spym.generic.Spm_image</span></tt> format.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>lx</strong> (<em>float</em>) &#8211; length on x axis</li>
<li><strong>ly</strong> (<em>float</em>) &#8211; length on y axis</li>
<li><strong>xc</strong> (<em>float</em>) &#8211; position of the center of the image on the x axis</li>
<li><strong>yc</strong> (<em>float</em>) &#8211; position of the center of the image on the y axis</li>
<li><strong>nx</strong> (<em>uint</em>) &#8211; x resolution</li>
<li><strong>ny</strong> (<em>uint</em>) &#8211; y resolution</li>
<li><strong>xy_unit</strong> (<em>str</em>) &#8211; xy unit</li>
<li><strong>alt_unit</strong> (<em>str</em>) &#8211; altitude unit</li>
<li><strong>press_unit</strong> (<em>str</em>) &#8211; contact pressure unit</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>See get_3D_data for other params.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">abapy.misc</span> <span class="kn">import</span> <span class="n">load</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="c"># In this case, a 3D FEM simulation has beed performed and the results are stored in the file ``ContactData.pckl``. See ``Get_ContactData`` to understand how this data has been extracted from an Abaqus odb file.</span>


<span class="n">out</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s">&#39;ContactData_berk.pckl&#39;</span><span class="p">)</span>
<span class="n">cdl</span> <span class="o">=</span> <span class="n">out</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c"># loading</span>
<span class="n">cdu</span> <span class="o">=</span> <span class="n">out</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c"># unloading</span>
<span class="n">hmax</span> <span class="o">=</span> <span class="o">-</span><span class="n">cdl</span><span class="o">.</span><span class="n">min_altitude</span><span class="p">()</span>
<span class="n">l</span> <span class="o">=</span> <span class="mf">7.</span> <span class="o">*</span> <span class="n">hmax</span>
<span class="n">alt</span><span class="p">,</span> <span class="n">press</span> <span class="o">=</span> <span class="n">cdu</span><span class="o">.</span><span class="n">export2spym</span><span class="p">(</span><span class="n">lx</span> <span class="o">=</span> <span class="n">l</span><span class="p">,</span> <span class="n">ly</span> <span class="o">=</span> <span class="n">l</span><span class="p">,</span> <span class="n">nx</span> <span class="o">=</span> <span class="mi">512</span><span class="p">,</span> <span class="n">ny</span> <span class="o">=</span> <span class="mi">512</span><span class="p">)</span>
<span class="n">alt</span><span class="o">.</span><span class="n">dump2gsf</span><span class="p">(</span><span class="s">&#39;image.gsf&#39;</span><span class="p">)</span>
<span class="n">xlabel</span><span class="p">,</span> <span class="n">ylabel</span><span class="p">,</span> <span class="n">zlabel</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">get_labels</span><span class="p">()</span>
<span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">,</span><span class="n">Z</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">get_xyz</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">clf</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s">&#39;equal&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">contourf</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">Z</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">cbar</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="n">cbar</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="n">zlabel</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">contour</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">Z</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">colors</span> <span class="o">=</span> <span class="s">&#39;black&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">xlabel</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">ylabel</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="./example_code/indentation/ContactData-export2spym.py">Source code</a>, <a class="reference external" href="./example_code/indentation/ContactData-export2spym.png">png</a>, <a class="reference external" href="./example_code/indentation/ContactData-export2spym.hires.png">hires.png</a>, <a class="reference external" href="./example_code/indentation/ContactData-export2spym.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/ContactData-export2spym.png" src="_images/ContactData-export2spym.png" />
</div>
<p>This script also produces a GSF image file, readable by both <tt class="docutils literal"><span class="pre">spym</span></tt> and Gwyddion: <a class="reference download internal" href="_downloads/image.gsf"><tt class="xref download docutils literal"><span class="pre">image.gsf</span></tt></a></p>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.ContactData.get_3D_data">
<tt class="descname">get_3D_data</tt><big>(</big><em>axi_repeat=100</em>, <em>delaunay_disp=None</em>, <em>crit_dist=1e-05</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#ContactData.get_3D_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.ContactData.get_3D_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns full 3D data usable for interpolation or for ploting. This method performs all the copy and paste needed to get the complete contact (due to symmetries) and also producec a triangular mesh of the surface using the Delaunay algorithm (via <tt class="docutils literal"><span class="pre">scipy</span></tt>).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>axi_repeat</strong> (<em>int &gt; 0</em>) &#8211; number of times axisymmetric profile has to be pasted orthoradially.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">3 arrays points, alt, press and conn</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">abapy.indentation</span> <span class="kn">import</span> <span class="n">ContactData</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>


<span class="c"># Axi contact</span>
<span class="n">cd</span> <span class="o">=</span> <span class="n">ContactData</span><span class="p">()</span>
<span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">alt</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">press</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">cd</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">altitude</span> <span class="o">=</span> <span class="n">alt</span><span class="p">,</span> <span class="n">pressure</span> <span class="o">=</span> <span class="n">press</span><span class="p">)</span>
<span class="n">points_axi</span><span class="p">,</span> <span class="n">alt_axi</span><span class="p">,</span> <span class="n">press_axi</span><span class="p">,</span> <span class="n">conn_axi</span> <span class="o">=</span> <span class="n">cd</span><span class="o">.</span><span class="n">get_3D_data</span><span class="p">(</span><span class="n">axi_repeat</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>



<span class="c"># 3D contact</span>
<span class="n">cd</span> <span class="o">=</span> <span class="n">ContactData</span><span class="p">(</span><span class="n">repeat</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">is_3D</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<span class="n">k</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">60</span><span class="p">))</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">60</span><span class="p">))</span>
<span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">k</span><span class="o">*</span><span class="mi">4</span><span class="p">,</span> <span class="n">k</span><span class="o">*</span><span class="mi">10</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>  <span class="n">p</span><span class="o">*</span><span class="mi">4</span><span class="p">,</span> <span class="n">p</span><span class="o">*</span><span class="mi">10</span><span class="p">]</span>
<span class="n">alt</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">cd</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">altitude</span> <span class="o">=</span> <span class="n">alt</span><span class="p">)</span>
<span class="n">points_3D</span><span class="p">,</span> <span class="n">alt_3D</span><span class="p">,</span> <span class="n">press_3D</span><span class="p">,</span> <span class="n">conn_3D</span> <span class="o">=</span> <span class="n">cd</span><span class="o">.</span><span class="n">get_3D_data</span><span class="p">()</span>



<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">clf</span><span class="p">()</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">121</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s">&#39;equal&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tricontourf</span><span class="p">(</span><span class="n">points_axi</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">points_axi</span><span class="p">[:,</span><span class="mi">1</span><span class="p">],</span> <span class="n">conn_axi</span><span class="p">,</span> <span class="n">alt_axi</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">triplot</span><span class="p">(</span><span class="n">points_axi</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">points_axi</span><span class="p">[:,</span><span class="mi">1</span><span class="p">],</span> <span class="n">conn_axi</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">&#39;axi contact&#39;</span><span class="p">)</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">122</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s">&#39;equal&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tricontourf</span><span class="p">(</span><span class="n">points_3D</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">points_3D</span><span class="p">[:,</span><span class="mi">1</span><span class="p">],</span> <span class="n">conn_3D</span><span class="p">,</span> <span class="n">alt_3D</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">triplot</span><span class="p">(</span><span class="n">points_3D</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">points_3D</span><span class="p">[:,</span><span class="mi">1</span><span class="p">],</span> <span class="n">conn_3D</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">&#39;3D contact&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="./example_code/indentation/ContactData-get_3D_data.py">Source code</a>, <a class="reference external" href="./example_code/indentation/ContactData-get_3D_data.png">png</a>, <a class="reference external" href="./example_code/indentation/ContactData-get_3D_data.hires.png">hires.png</a>, <a class="reference external" href="./example_code/indentation/ContactData-get_3D_data.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/ContactData-get_3D_data.png" src="_images/ContactData-get_3D_data.png" />
</div>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.ContactData.interpolate">
<tt class="descname">interpolate</tt><big>(</big><em>coor1</em>, <em>coor2</em>, <em>axi_repeat=100</em>, <em>delaunay_disp=None</em>, <em>method='linear'</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#ContactData.interpolate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.ContactData.interpolate" title="Permalink to this definition">¶</a></dt>
<dd><p>Allows general interpolation on the a contact data instance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>coor1</strong> (<em>any list/array of floats</em>) &#8211; radial position in the axisymmetric case or in plane position first coordinate in the 3D case.</li>
<li><strong>coor2</strong> (<em>any list/array of floats</em>) &#8211; orthoradial position in the axisymmetric case of second in plane coordinate in the 3D case.</li>
<li><strong>axi_repeat</strong> (<em>int &gt; 0</em>) &#8211; number of times axisymmetric profile has to be pasted orthoradially.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">abapy.misc</span> <span class="kn">import</span> <span class="n">load</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>


<span class="c"># In this case, a 3D FEM simulation has beed performed and the results are stored in the file ``ContactData_berk.pckl``. See ``Get_ContactData`` to understand how this data has been extracted from an Abaqus odb file.</span>


<span class="n">out</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s">&#39;ContactData_berk.pckl&#39;</span><span class="p">)</span>
<span class="n">cd0</span> <span class="o">=</span> <span class="n">out</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c"># First step data: loading</span>
<span class="n">cd1</span> <span class="o">=</span> <span class="n">out</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c"># Second step data: unloading</span>
<span class="n">hmax</span> <span class="o">=</span> <span class="o">-</span><span class="n">cd0</span><span class="o">.</span><span class="n">min_altitude</span><span class="p">()</span>

<span class="c"># First let&#39;s map altitude and pressure on cartesian grids.</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mf">2.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mi">256</span><span class="p">)</span>
<span class="n">X</span><span class="p">,</span> <span class="n">Y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>

<span class="n">Alt0</span><span class="p">,</span> <span class="n">Press0</span> <span class="o">=</span> <span class="n">cd0</span><span class="o">.</span><span class="n">interpolate</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span><span class="s">&#39;linear&#39;</span><span class="p">)</span>
<span class="n">Alt1</span><span class="p">,</span> <span class="n">Press1</span> <span class="o">=</span> <span class="n">cd1</span><span class="o">.</span><span class="n">interpolate</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span><span class="s">&#39;linear&#39;</span><span class="p">)</span>
<span class="n">Alt0</span> <span class="o">=</span> <span class="n">Alt0</span> <span class="o">/</span> <span class="n">hmax</span>
<span class="n">Alt1</span> <span class="o">=</span> <span class="n">Alt1</span> <span class="o">/</span> <span class="n">hmax</span>

<span class="c"># Now we wan to get some sections of the imprint</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mi">256</span><span class="p">)</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="o">-</span><span class="n">s</span><span class="p">)[::</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">s</span><span class="p">)</span>
<span class="n">theta0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
<span class="n">theta1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mf">15.</span><span class="p">)</span>
<span class="n">xs0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta0</span><span class="p">)</span> <span class="o">*</span> <span class="n">s</span>
<span class="n">ys0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta0</span><span class="p">)</span> <span class="o">*</span> <span class="n">s</span>
<span class="n">xs1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta1</span><span class="p">)</span> <span class="o">*</span> <span class="n">s</span>
<span class="n">ys1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta1</span><span class="p">)</span> <span class="o">*</span> <span class="n">s</span>
<span class="c"># Sections under full load</span>
<span class="n">Alt0_sec_l</span><span class="p">,</span> <span class="n">Press0_sec_l</span> <span class="o">=</span> <span class="n">cd0</span><span class="o">.</span><span class="n">interpolate</span><span class="p">(</span><span class="n">xs0</span><span class="p">,</span> <span class="n">ys0</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span><span class="s">&#39;linear&#39;</span><span class="p">)</span>
<span class="n">Alt1_sec_l</span><span class="p">,</span> <span class="n">Press1_sec_l</span> <span class="o">=</span> <span class="n">cd0</span><span class="o">.</span><span class="n">interpolate</span><span class="p">(</span><span class="n">xs1</span><span class="p">,</span> <span class="n">ys1</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span><span class="s">&#39;linear&#39;</span><span class="p">)</span>
<span class="n">Alt0_sec_l</span> <span class="o">=</span> <span class="n">Alt0_sec_l</span> <span class="o">/</span> <span class="n">hmax</span>
<span class="n">Alt1_sec_l</span> <span class="o">=</span> <span class="n">Alt1_sec_l</span> <span class="o">/</span> <span class="n">hmax</span>
<span class="c"># Sections after unloading</span>
<span class="n">Alt0_sec_u</span><span class="p">,</span> <span class="n">Press0_sec_u</span> <span class="o">=</span> <span class="n">cd1</span><span class="o">.</span><span class="n">interpolate</span><span class="p">(</span><span class="n">xs0</span><span class="p">,</span> <span class="n">ys0</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span><span class="s">&#39;linear&#39;</span><span class="p">)</span>
<span class="n">Alt1_sec_u</span><span class="p">,</span> <span class="n">Press1_sec_u</span> <span class="o">=</span> <span class="n">cd1</span><span class="o">.</span><span class="n">interpolate</span><span class="p">(</span><span class="n">xs1</span><span class="p">,</span> <span class="n">ys1</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span><span class="s">&#39;linear&#39;</span><span class="p">)</span>
<span class="n">Alt0_sec_u</span> <span class="o">=</span> <span class="n">Alt0_sec_u</span> <span class="o">/</span> <span class="n">hmax</span>
<span class="n">Alt1_sec_u</span> <span class="o">=</span> <span class="n">Alt1_sec_u</span> <span class="o">/</span> <span class="n">hmax</span>





<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">clf</span><span class="p">()</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">221</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([])</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">([])</span>
<span class="n">grad</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">contourf</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">Alt0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">contour</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">Alt0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">colors</span> <span class="o">=</span> <span class="s">&#39;black&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xs0</span><span class="p">,</span> <span class="n">ys0</span><span class="p">,</span> <span class="s">&#39;b-&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xs1</span><span class="p">,</span> <span class="n">ys1</span><span class="p">,</span> <span class="s">&#39;r-&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s">&#39;equal&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">&#39;Altitude Loaded&#39;</span><span class="p">)</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">222</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([])</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">([])</span>
<span class="n">grad</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">contourf</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">Alt1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">contour</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">Alt1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">colors</span> <span class="o">=</span> <span class="s">&#39;black&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xs0</span><span class="p">,</span> <span class="n">ys0</span><span class="p">,</span> <span class="s">&#39;b-&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xs1</span><span class="p">,</span> <span class="n">ys1</span><span class="p">,</span> <span class="s">&#39;r-&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s">&#39;equal&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">&#39;Altitude Unloaded&#39;</span><span class="p">)</span>
<span class="n">ax3</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">223</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.3</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">Alt0_sec_l</span><span class="p">,</span> <span class="s">&#39;b-&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">Alt1_sec_l</span><span class="p">,</span> <span class="s">&#39;r-&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">&#39;Cross sections&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">ax4</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">224</span><span class="p">)</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.3</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">Alt0_sec_u</span><span class="p">,</span> <span class="s">&#39;b-&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">Alt1_sec_u</span><span class="p">,</span> <span class="s">&#39;r-&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">&#39;Cross sections&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="./example_code/indentation/ContactData-interpolate.py">Source code</a>, <a class="reference external" href="./example_code/indentation/ContactData-interpolate.png">png</a>, <a class="reference external" href="./example_code/indentation/ContactData-interpolate.hires.png">hires.png</a>, <a class="reference external" href="./example_code/indentation/ContactData-interpolate.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/ContactData-interpolate.png" src="_images/ContactData-interpolate.png" />
</div>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.ContactData.max_altitude">
<tt class="descname">max_altitude</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#ContactData.max_altitude"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.ContactData.max_altitude" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the maximum altitude.</p>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.ContactData.max_pressure">
<tt class="descname">max_pressure</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#ContactData.max_pressure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.ContactData.max_pressure" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the maximum pressure.</p>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.ContactData.min_altitude">
<tt class="descname">min_altitude</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#ContactData.min_altitude"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.ContactData.min_altitude" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the minimum altitude.</p>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.ContactData.min_pressure">
<tt class="descname">min_pressure</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#ContactData.min_pressure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.ContactData.min_pressure" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the minimum pressure.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="get-contact-data">
<h4>Get Contact Data<a class="headerlink" href="#get-contact-data" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="abapy.indentation.Get_ContactData">
<tt class="descclassname">abapy.indentation.</tt><tt class="descname">Get_ContactData</tt><big>(</big><em>odb</em>, <em>instance</em>, <em>node_set</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Get_ContactData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Get_ContactData" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds and reformulate contact data on a given node set and a give instance. This function aims to read in Abaqus odb files and is then only usable in <tt class="docutils literal"><span class="pre">abaqus</span> <span class="pre">python</span></tt> and <tt class="docutils literal"><span class="pre">abaqus</span> <span class="pre">viewer</span> <span class="pre">-noGUI</span></tt>. Following conventions are used:</p>
<ul class="simple">
<li>The normal to the initial surface must be the y axis.</li>
<li>In axisymmetrical simulations, this is nearly automatic. In 3D simulations, the initial plane surface must be in parallel to the (x,z) plane.</li>
<li>As a consequence, coor1 will be x, coor2 will be z and the altitude is y.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>odb</strong> (odb instance obtained using <tt class="docutils literal"><span class="pre">odbAccess.openOdb</span></tt>.) &#8211; the odb instance where needed data is.</li>
<li><strong>instance</strong> (<em>string</em>) &#8211; name of an instance in contact.</li>
<li><strong>node_set</strong> (<em>string</em>) &#8211; name of a node set belonging to the instance.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
</div>
<div class="section" id="elasticity">
<h2>Elasticity<a class="headerlink" href="#elasticity" title="Permalink to this headline">¶</a></h2>
<div class="section" id="hertz">
<h3>Hertz<a class="headerlink" href="#hertz" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="abapy.indentation.Hertz">
<em class="property">class </em><tt class="descclassname">abapy.indentation.</tt><tt class="descname">Hertz</tt><big>(</big><em>F=1.0</em>, <em>a=None</em>, <em>h=None</em>, <em>R=1.0</em>, <em>E=1.0</em>, <em>nu=0.3</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Hertz"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Hertz" title="Permalink to this definition">¶</a></dt>
<dd><p>Hertz spherical indentation model.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">abapy.indentation</span> <span class="kn">import</span> <span class="n">Hertz</span>
<span class="kn">from</span> <span class="nn">abapy.mesh</span> <span class="kn">import</span> <span class="n">Mesh</span><span class="p">,</span> <span class="n">Nodes</span><span class="p">,</span> <span class="n">RegularQuadMesh</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">===========</span>
<span class="sd">Hertz model</span>
<span class="sd">===========</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">H</span> <span class="o">=</span> <span class="n">Hertz</span><span class="p">(</span><span class="n">F</span> <span class="o">=</span> <span class="mf">1.</span><span class="p">,</span> <span class="n">E</span><span class="o">=</span><span class="mf">1.</span><span class="p">,</span> <span class="n">nu</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">)</span>
<span class="n">Ne</span> <span class="o">=</span> <span class="mi">50</span>

<span class="n">mesh</span> <span class="o">=</span> <span class="n">RegularQuadMesh</span><span class="p">(</span><span class="n">N1</span> <span class="o">=</span> <span class="n">Ne</span><span class="p">,</span> <span class="n">N2</span> <span class="o">=</span> <span class="n">Ne</span><span class="p">,</span> <span class="n">l1</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">a</span> <span class="o">*</span> <span class="mf">2.</span><span class="p">,</span> <span class="n">l2</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">a</span> <span class="o">*</span> <span class="mf">2.</span><span class="p">,</span> <span class="n">dtf</span> <span class="o">=</span> <span class="s">&#39;d&#39;</span><span class="p">)</span>
<span class="n">mesh</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">H</span><span class="o">.</span><span class="n">a</span><span class="o">/</span><span class="mf">20.</span><span class="p">,</span> <span class="n">H</span><span class="o">.</span><span class="n">a</span><span class="o">/</span><span class="mf">20.</span><span class="p">)</span>
<span class="n">S</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">eval_tensorFunction</span><span class="p">(</span><span class="n">H</span><span class="o">.</span><span class="n">sigma</span><span class="p">)</span>
<span class="n">R</span><span class="p">,</span><span class="n">Z</span><span class="p">,</span><span class="n">T</span><span class="p">,</span><span class="n">tri</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">dump2triplot</span><span class="p">()</span>
<span class="n">R</span><span class="p">,</span> <span class="n">Z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">R</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">Z</span><span class="p">)</span>
<span class="c"># Some fields</span>
<span class="n">srr</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>
<span class="n">szz</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="mi">22</span><span class="p">)</span>
<span class="n">stt</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="mi">33</span><span class="p">)</span>
<span class="n">srz</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
<span class="n">smises</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">vonmises</span><span class="p">()</span>
<span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">,</span> <span class="n">s3</span><span class="p">,</span> <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">eigen</span><span class="p">()</span> <span class="c"># Eigenvalues and eigenvectors</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">smises</span><span class="o">.</span><span class="n">data</span>

<span class="n">N</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">levels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">N</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">a</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tricontourf</span><span class="p">(</span><span class="n">R</span><span class="o">/</span><span class="n">a</span><span class="p">,</span> <span class="n">Z</span><span class="o">/</span><span class="n">a</span><span class="p">,</span> <span class="n">tri</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">levels</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tricontour</span><span class="p">(</span><span class="n">R</span><span class="o">/</span><span class="n">a</span><span class="p">,</span> <span class="n">Z</span><span class="o">/</span><span class="n">a</span><span class="p">,</span> <span class="n">tri</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">levels</span><span class="p">,</span> <span class="n">colors</span> <span class="o">=</span> <span class="s">&#39;black&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">&#39;$r/a$&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mf">14.</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">&#39;$z/a$&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mf">14.</span><span class="p">)</span>
<span class="c">#plt.quiver(R, Z, v1.data1, v1.data2)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="./example_code/indentation/Hertz.py">Source code</a>, <a class="reference external" href="./example_code/indentation/Hertz.png">png</a>, <a class="reference external" href="./example_code/indentation/Hertz.hires.png">hires.png</a>, <a class="reference external" href="./example_code/indentation/Hertz.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/Hertz.png" src="_images/Hertz.png" />
</div>
<dl class="attribute">
<dt id="abapy.indentation.Hertz.Eeq">
<tt class="descname">Eeq</tt><a class="headerlink" href="#abapy.indentation.Hertz.Eeq" title="Permalink to this definition">¶</a></dt>
<dd><p>Eeq: equivalent modulus (GPa)</p>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.Hertz.get_Eeq">
<tt class="descname">get_Eeq</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Hertz.get_Eeq"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Hertz.get_Eeq" title="Permalink to this definition">¶</a></dt>
<dd><p>Eeq: equivalent modulus (GPa)</p>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.Hertz.sigma">
<tt class="descname">sigma</tt><big>(</big><em>r</em>, <em>z</em>, <em>t=0.0</em>, <em>labels=None</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Hertz.sigma"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Hertz.sigma" title="Permalink to this definition">¶</a></dt>
<dd><p>To do.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="hanson">
<h3>Hanson<a class="headerlink" href="#hanson" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="abapy.indentation.Hanson">
<em class="property">class </em><tt class="descclassname">abapy.indentation.</tt><tt class="descname">Hanson</tt><big>(</big><em>F=None</em>, <em>a=None</em>, <em>h=None</em>, <em>half_angle=70.29</em>, <em>E=1.0</em>, <em>nu=0.3</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Hanson"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Hanson" title="Permalink to this definition">¶</a></dt>
<dd><p>Hanson conical indentation model.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">abapy.indentation</span> <span class="kn">import</span> <span class="n">Hanson</span>
<span class="kn">from</span> <span class="nn">abapy.mesh</span> <span class="kn">import</span> <span class="n">Mesh</span><span class="p">,</span> <span class="n">Nodes</span><span class="p">,</span> <span class="n">RegularQuadMesh</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">===========</span>
<span class="sd">Hanson model for conical indentation</span>
<span class="sd">===========</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">H</span> <span class="o">=</span> <span class="n">Hanson</span><span class="p">(</span><span class="n">F</span> <span class="o">=</span> <span class="mf">1.</span><span class="p">,</span> <span class="n">E</span><span class="o">=</span><span class="mf">1.</span><span class="p">,</span> <span class="n">nu</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">,</span> <span class="n">half_angle</span> <span class="o">=</span> <span class="mf">70.29</span><span class="p">)</span>
<span class="n">Ne</span> <span class="o">=</span> <span class="mi">20</span>

<span class="n">mesh</span> <span class="o">=</span> <span class="n">RegularQuadMesh</span><span class="p">(</span><span class="n">N1</span> <span class="o">=</span> <span class="n">Ne</span><span class="p">,</span> <span class="n">N2</span> <span class="o">=</span> <span class="n">Ne</span><span class="p">,</span> <span class="n">l1</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">a</span> <span class="o">*</span> <span class="mf">2.</span><span class="p">,</span> <span class="n">l2</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">a</span> <span class="o">*</span> <span class="mf">2.</span><span class="p">,</span> <span class="n">dtf</span> <span class="o">=</span> <span class="s">&#39;d&#39;</span><span class="p">)</span>
<span class="n">mesh</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">H</span><span class="o">.</span><span class="n">a</span><span class="o">/</span><span class="mf">20.</span><span class="p">,</span> <span class="n">H</span><span class="o">.</span><span class="n">a</span><span class="o">/</span><span class="mf">20.</span><span class="p">)</span>
<span class="n">S</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">eval_tensorFunction</span><span class="p">(</span><span class="n">H</span><span class="o">.</span><span class="n">sigma</span><span class="p">)</span>
<span class="n">R</span><span class="p">,</span><span class="n">Z</span><span class="p">,</span><span class="n">T</span><span class="p">,</span><span class="n">tri</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">dump2triplot</span><span class="p">()</span>
<span class="n">R</span><span class="p">,</span> <span class="n">Z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">R</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">Z</span><span class="p">)</span>
<span class="c"># Some fields</span>
<span class="n">srr</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>
<span class="n">szz</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="mi">22</span><span class="p">)</span>
<span class="n">stt</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="mi">33</span><span class="p">)</span>
<span class="n">srz</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
<span class="n">smises</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">vonmises</span><span class="p">()</span>
<span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">,</span> <span class="n">s3</span><span class="p">,</span> <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">eigen</span><span class="p">()</span> <span class="c"># Eigenvalues and eigenvectors</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">smises</span><span class="o">.</span><span class="n">data</span>

<span class="n">N</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">levels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">N</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">a</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tricontourf</span><span class="p">(</span><span class="n">R</span><span class="o">/</span><span class="n">a</span><span class="p">,</span> <span class="n">Z</span><span class="o">/</span><span class="n">a</span><span class="p">,</span> <span class="n">tri</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">levels</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tricontour</span><span class="p">(</span><span class="n">R</span><span class="o">/</span><span class="n">a</span><span class="p">,</span> <span class="n">Z</span><span class="o">/</span><span class="n">a</span><span class="p">,</span> <span class="n">tri</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">levels</span><span class="p">,</span> <span class="n">colors</span> <span class="o">=</span> <span class="s">&#39;black&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">&#39;$r/a$&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mf">14.</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">&#39;$z/a$&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mf">14.</span><span class="p">)</span>
<span class="c">#plt.quiver(R, Z, v1.data1, v1.data2)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="./example_code/indentation/Hanson.py">Source code</a>, <a class="reference external" href="./example_code/indentation/Hanson.png">png</a>, <a class="reference external" href="./example_code/indentation/Hanson.hires.png">hires.png</a>, <a class="reference external" href="./example_code/indentation/Hanson.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/Hanson.png" src="_images/Hanson.png" />
</div>
<dl class="attribute">
<dt id="abapy.indentation.Hanson.Eeq">
<tt class="descname">Eeq</tt><a class="headerlink" href="#abapy.indentation.Hanson.Eeq" title="Permalink to this definition">¶</a></dt>
<dd><p>Eeq: equivalent modulus (GPa)</p>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.Hanson.get_Eeq">
<tt class="descname">get_Eeq</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Hanson.get_Eeq"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Hanson.get_Eeq" title="Permalink to this definition">¶</a></dt>
<dd><p>Eeq: equivalent modulus (GPa)</p>
</dd></dl>

<dl class="method">
<dt id="abapy.indentation.Hanson.sigma">
<tt class="descname">sigma</tt><big>(</big><em>r</em>, <em>z</em>, <em>t=0.0</em>, <em>labels=None</em><big>)</big><a class="reference internal" href="_modules/abapy/indentation.html#Hanson.sigma"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abapy.indentation.Hanson.sigma" title="Permalink to this definition">¶</a></dt>
<dd><p>To do.</p>
</dd></dl>

</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Indentation</a><ul>
<li><a class="reference internal" href="#indentation-meshes">Indentation meshes</a><ul>
<li><a class="reference internal" href="#paraminfinitemesh-function"><tt class="docutils literal"><span class="pre">ParamInfiniteMesh</span></tt> function</a></li>
<li><a class="reference internal" href="#indentationmesh-function"><tt class="docutils literal"><span class="pre">IndentationMesh</span></tt> function</a></li>
</ul>
</li>
<li><a class="reference internal" href="#indenters">Indenters</a><ul>
<li><a class="reference internal" href="#rigidcone2d-class"><tt class="docutils literal"><span class="pre">RigidCone2D</span></tt> class</a></li>
<li><a class="reference internal" href="#deformablecone2d-class"><tt class="docutils literal"><span class="pre">DeformableCone2D</span></tt> class</a></li>
<li><a class="reference internal" href="#deformablecone3d-class"><tt class="docutils literal"><span class="pre">DeformableCone3D</span></tt> class</a></li>
<li><a class="reference internal" href="#indenter-miscellaneous">Indenter miscellaneous</a></li>
</ul>
</li>
<li><a class="reference internal" href="#simulation-tools">Simulation tools</a><ul>
<li><a class="reference internal" href="#steps-definition">Steps definition</a></li>
<li><a class="reference internal" href="#inp-builder">Inp builder</a></li>
<li><a class="reference internal" href="#simulation-manager">Simulation manager</a><ul>
<li><a class="reference internal" href="#settings">Settings</a></li>
<li><a class="reference internal" href="#launchers">Launchers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#indentation-post-processing">Indentation post-processing</a><ul>
<li><a class="reference internal" href="#contact-data">Contact Data</a></li>
<li><a class="reference internal" href="#get-contact-data">Get Contact Data</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#elasticity">Elasticity</a><ul>
<li><a class="reference internal" href="#hertz">Hertz</a></li>
<li><a class="reference internal" href="#hanson">Hanson</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="postproc.html"
                        title="previous chapter">Post Processing</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="misc.html"
                        title="next chapter">Miscellaneous</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/indentation.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="misc.html" title="Miscellaneous"
             >next</a> |</li>
        <li class="right" >
          <a href="postproc.html" title="Post Processing"
             >previous</a> |</li>
        <li><a href="index.html">abapy 2.3.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Ludovic Charleux.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>